(this["webpackJsonpflexbox-yoga-in-webgl"]=this["webpackJsonpflexbox-yoga-in-webgl"]||[]).push([[0],{60:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r=n(6),i=n.n(r),a=n(37),c=n.n(a),o=(n(60),n(13)),s=n(9),l=n(15),h=n(3),u=n(14),j=n(22),d=n(74),f=n(75),g=n(79),b=n(55),p=n(31),m=n(53),x=n(54),O=n(1),v=n(2),w=n(4),y=n(5),S=n(21),M={byp:{value:0},tex:{type:"t",value:null},time:{type:"f",value:0},factor:{type:"f",value:0},resolution:{type:"v2",value:null}},R="varying vec2 vUv;\n    void main(){  \n      vUv = uv; \n      vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);\n      gl_Position = projectionMatrix * modelViewPosition;\n    }",z="\n  uniform int byp;\n    uniform float time;\n    uniform float factor;\n    uniform vec2 resolution;\n    uniform sampler2D tex;\n    varying vec2 vUv;\n    void main() { \n      if (byp<1) {\n        vec2 uv = vUv;\n        float frequency = 4.0;\n        float amplitude = 0.015 * factor;\n        float x = uv.y * frequency + time * .7; \n        float y = uv.x * frequency + time * .3;\n        uv.x += .5 * amplitude * cos(x);\n        uv.y += .5 * amplitude * sin(y);\n        vec4 rgba = texture2D(tex, uv);\n        gl_FragColor = rgba;\n      } else {\n        gl_FragColor = texture2D(tex, vUv);\n      }\n    }",B=function(e){Object(w.a)(n,e);var t=Object(y.a)(n);function n(e){var r;return Object(O.a)(this,n),(r=t.call(this)).uniforms=h.UniformsUtils.clone(M),void 0===e&&(e=64),r.uniforms.resolution.value=new h.Vector2(e,e),r.material=new h.ShaderMaterial({uniforms:r.uniforms,vertexShader:R,fragmentShader:z}),r.camera=new h.OrthographicCamera(-1,1,1,-1,0,1),r.scene=new h.Scene,r.quad=new h.Mesh(new h.PlaneBufferGeometry(2,2),null),r.quad.frustumCulled=!1,r.scene.add(r.quad),r.factor=0,r.time=0,r}return Object(v.a)(n,[{key:"render",value:function(e,t,n,r,i){var a=Math.max(0,this.factor);this.uniforms.byp.value=a?0:1,this.uniforms.tex.value=n.texture,this.uniforms.time.value=this.time,this.uniforms.factor.value=this.factor,this.time+=.01,this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera))}}]),n}(S.a),H={top:0,pages:0,threshold:4,mouse:[0,0],content:[{tag:"00",text:"The Bacchic\nand Dionysiac\nRites",images:["/images/BH41NVu.jpg","/images/fBoIJLX.jpg","/images/04zTfWB.jpg"]},{tag:"01",text:"The Elysian\nMysteries",images:["/images/c4cA8UN.jpg","/images/ajQ73ol.jpg","/images/gZOmLNU.jpg"]},{tag:"02",text:"The Hiramic\nLegend",images:["/images/mbFIW1b.jpg","/images/mlDUVig.jpg","/images/gwuZrgo.jpg"]}],depthbox:[{depth:0,color:"#cccccc",textColor:"#ffffff",text:"In a void,\nno one could say\nwhy a thing\nonce set in motion\nshould stop anywhere.",image:"/images/cAKwexj.jpg"},{depth:-5,textColor:"#272727",text:"For why should it stop\nhere rather than here?\nSo that a thing\nwill either be at rest\nor must be moved\nad infinitum.",image:"/images/04zTfWB.jpg"}],lines:[{points:[[-20,0,0],[-9,0,0]],color:"black",lineWidth:.5},{points:[[20,0,0],[9,0,0]],color:"black",lineWidth:.5}]},T=n(12);function U(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(u.e)(),i=n.gl,a=n.size,c=n.camera,o=n.scene;Object(r.useEffect)((function(){e.current.setSize(a.width,a.height)}),[a]);var s=H.top,l=0,j=[0,0,0,0,0,0,0,0,0,0];return Object(u.c)((function(){var n=H.top;j[l]=Math.abs(n-s);var r=j.reduce((function(e,t){return e+t}))/j.length;t.current.factor=h.MathUtils.lerp(t.current.factor,r/20,.1),s=n,l=(l+1)%10,i.autoClear=!0,e.current.render()}),1),Object(T.jsxs)("effectComposer",{ref:e,args:[i],children:[Object(T.jsx)("renderPass",{attachArray:"passes",scene:o,camera:c}),Object(T.jsx)("waterPass",{attachArray:"passes",ref:t}),Object(T.jsx)("shaderPass",{attachArray:"passes",args:[x.a]})]})}Object(u.b)({EffectComposer:b.a,ShaderPass:p.a,RenderPass:m.a,WaterPass:B});var W=n(17),C=n(76),P=["bold","anchorX","anchorY","textAlign"];function A(e){var t=e.bold,n=void 0!==t&&t,r=e.anchorX,i=void 0===r?"left":r,a=e.anchorY,c=void 0===a?"top":a,o=e.textAlign,l=void 0===o?"left":o,h=Object(W.a)(e,P),u=Object(j.d)(),d=n?"/Inter-Bold.woff":"/Inter-Regular.woff";return Object(T.jsx)(C.a,Object(s.a)({anchorX:i,anchorY:c,textAlign:l,font:d,onSync:u},h))}var L=n(77),k=n(78),F=n(73);function q(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),i=Object(L.a)("/geo.min.glb",!0).nodes;return Object(u.c)((function(e){var r=e.clock,i=(1+Math.sin(1.5*r.getElapsedTime()))/2;t.current.position.y=i/3,n.current.scale.y=n.current.scale.z=1+i,n.current.scale.x=1.25*(1+i),t.current.rotation.x=t.current.rotation.z+=.005,t.current.position.x=h.MathUtils.lerp(t.current.position.x,H.mouse[0]/2,.05),t.current.position.z=h.MathUtils.lerp(t.current.position.z,H.mouse[1]/4,.03)})),Object(T.jsxs)("group",Object(s.a)(Object(s.a)({},e),{},{dispose:null,children:[Object(T.jsxs)("group",{ref:t,children:[Object(T.jsx)("mesh",{geometry:i.geo.geometry,castShadow:!0,receiveShadow:!0,children:Object(T.jsx)(k.a,{color:"#ffffff",flatShading:!0,roughness:1,metalness:.5,factor:15,speed:5})}),Object(T.jsx)("mesh",{geometry:i.geo.geometry,children:Object(T.jsx)("meshBasicMaterial",{wireframe:!0})})]}),Object(T.jsxs)("group",{position:[1.25,-.5,0],children:[Object(T.jsxs)(A,{position:[0,0,0],fontSize:.07,lineHeight:1,letterSpacing:-.05,children:["03",Object(T.jsx)("meshBasicMaterial",{color:"#cccccc",toneMapped:!1})]}),Object(T.jsx)(A,{bold:!0,position:[-.01,-.1,0],fontSize:.1,lineHeight:1,letterSpacing:-.05,color:"black",children:"Poimandres,\nThe vision of Hermes"})]}),Object(T.jsx)(F.a,{ref:n,opacity:.3,"rotation-x":-Math.PI/2,position:[0,-1.51,0]})]}))}function E(e){var t=e.onReflow,n=Object(j.c)();return Object(r.useLayoutEffect)((function(){return t&&t.apply(void 0,Object(l.a)(n))}),[t,n]),null}function I(e){var t=e.text,n=e.tag,r=e.images,i=e.textScaleFactor,a=e.onReflow,c=e.left,o=void 0!==c&&c,l=Object(u.d)(h.TextureLoader,r),d=Object(u.e)().viewport,f={centerAnchor:!0,grow:1,marginTop:1,marginLeft:1*o,marginRight:1*!o,width:"auto",height:"auto",minWidth:3,minHeight:3,maxWidth:6,maxHeight:6};return Object(T.jsxs)(j.a,{dir:"column",align:o?"flex-start":"flex-end",justify:"flex-start",width:"100%",height:"auto",minHeight:"100%",children:[Object(T.jsx)(E,{onReflow:a}),Object(T.jsx)(j.a,{dir:"row",width:"100%",height:"auto",justify:o?"flex-end":"flex-start",margin:0,grow:1,wrap:"wrap",children:l.map((function(e,t){return Object(T.jsx)(j.a,Object(s.a)(Object(s.a)({},f),{},{children:function(t,n){return Object(T.jsxs)("mesh",{children:[Object(T.jsx)("planeBufferGeometry",{args:[t,n]}),Object(T.jsx)("meshBasicMaterial",{map:e,toneMapped:!1})]})}}),t)}))}),Object(T.jsx)(j.a,{marginLeft:1.5,marginRight:1.5,marginTop:2,children:Object(T.jsxs)(A,{position:[o?1:-1,.5,1],fontSize:i,lineHeight:1,letterSpacing:-.05,maxWidth:d.width/4*3,children:[n,Object(T.jsx)("meshBasicMaterial",{color:"#cccccc",toneMapped:!1})]})}),Object(T.jsx)(j.a,{marginLeft:o?1.5:1,marginRight:o?1:1.5,marginBottom:1,children:Object(T.jsx)(A,{bold:!0,"position-z":.5,textAlign:o?"left":"right",fontSize:1.5*i,lineHeight:1,letterSpacing:-.05,color:"black",maxWidth:d.width/4*3,children:t})})]})}function V(e){var t=e.depth,n=e.boxWidth,i=e.boxHeight,a=e.text,c=e.textColor,o=e.color,s=e.map,l=e.textScaleFactor,j=Object(r.useRef)(),d=Object(u.e)(),f=d.viewport,g=d.size,b=Object(r.useRef)(H.top/g.height);return Object(u.c)((function(){var e=b.current=h.MathUtils.lerp(b.current,H.top/g.height,.15);t>=0&&(j.current.opacity=e<1.7*H.threshold?1:1-(e-1.7*H.threshold))})),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("mesh",{position:[n/2,-i/2,t],children:[Object(T.jsx)("planeBufferGeometry",{args:[n,i]}),Object(T.jsx)("meshBasicMaterial",{ref:j,color:o,map:s,toneMapped:!1,transparent:!0,opacity:1})]}),Object(T.jsx)(A,{bold:!0,position:[n/2,-i/2,t+1.5],maxWidth:f.width/4*1,anchorX:"center",anchorY:"middle",fontSize:.6*l,lineHeight:1,letterSpacing:-.05,color:c,children:a})]})}function X(e){var t=e.onReflow,n=Object(r.useRef)(),i=Object(u.e)(),a=i.viewport,c=i.size,l=Object(d.a)(1920,1920,.5),g=Object(o.a)(l,2),b=g[0],p=g[1],m=Object(u.d)(h.TextureLoader,H.depthbox[0].image),x=new h.Vector3,O=Object(r.useRef)(H.top/c.height);Object(u.c)((function(){var e=O.current=h.MathUtils.lerp(O.current,H.top/c.height,.15),t=e*a.height,r=H.threshold*a.height;n.current.position.lerp(x.set(0,e<H.threshold?t:r,e<H.threshold?0:1.25*e),.15)}));var v=Object(r.useCallback)((function(e,n){return t(H.pages=n/a.height+5.5)}),[t,a.height]),w=Object(r.useRef)([]),y=Math.min(1,a.width/16);return Object(T.jsx)("group",{ref:n,children:Object(T.jsxs)(j.b,{dir:"column",position:[-a.width/2,a.height/2,0],size:[a.width,a.height,0],onReflow:v,children:[H.content.map((function(e,t){return Object(T.jsx)(I,Object(s.a)({left:!(t%2),textScaleFactor:y,onReflow:function(e,n){w.current[t]=n,H.threshold=Math.max(4,4/(15.8*3)*w.current.reduce((function(e,t){return e+t}),0))}},e),t)})),Object(T.jsx)(j.a,{dir:"row",width:"100%",height:"100%",align:"center",justify:"center",children:Object(T.jsxs)(j.a,{centerAnchor:!0,children:[H.lines.map((function(e,t){return Object(T.jsx)(f.a,Object(s.a)({},e),t)})),Object(T.jsx)(A,{bold:!0,"position-z":.5,anchorX:"center",anchorY:"middle",fontSize:1.5*y,lineHeight:1,letterSpacing:-.05,color:"black",maxWidth:a.width/4*3,children:H.depthbox[0].text})]})}),Object(T.jsx)(j.a,{dir:"row",width:"100%",height:"100%",align:"center",justify:"center",children:Object(T.jsxs)(j.a,{children:[Object(T.jsx)(V,Object(s.a)(Object(s.a)({},H.depthbox[0]),{},{text:H.depthbox[1].text,boxWidth:b,boxHeight:p,map:m,textScaleFactor:y})),Object(T.jsx)(q,{position:[b/2,-p/2,H.depthbox[1].depth]})]})})]})})}function Y(){var e=Object(r.useRef)(),t=function(e){return H.top=e.target.scrollTop};Object(r.useEffect)((function(){t({target:e.current})}),[]);var n=Object(r.useState)(0),i=Object(o.a)(n,2),a=i[0],c=i[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(u.a,{shadows:!0,raycaster:{enabled:!1},dpr:[1,2],camera:{position:[0,0,10],far:1e3},gl:{powerPreference:"high-performance",alpha:!1,antialias:!1,stencil:!1,depth:!1},onCreated:function(e){return e.gl.setClearColor("#f5f5f5")},children:[Object(T.jsx)("pointLight",{position:[-10,-10,-10],intensity:1}),Object(T.jsx)("ambientLight",{intensity:.4}),Object(T.jsx)("spotLight",{castShadow:!0,angle:.3,penumbra:1,position:[0,10,20],intensity:5,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024}),Object(T.jsx)(r.Suspense,{fallback:null,children:Object(T.jsx)(X,{onReflow:c})}),Object(T.jsx)(U,{})]}),Object(T.jsx)("div",{className:"scrollArea",ref:e,onScroll:t,onPointerMove:function(e){return H.mouse=[e.clientX/window.innerWidth*2-1,e.clientY/window.innerHeight*2-1]},children:Object(T.jsx)("div",{style:{height:"".concat(100*a,"vh")}})}),Object(T.jsx)(g.a,{})]})}c.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(Y,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.72f226c5.chunk.js.map